<!-- <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd"> -->

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
 	<meta name="description" content="抖音数据分析服务">
 	<meta name="keywords" content="抖音排行榜,抖音数据,抖音营销-抖商助手 ">
    <meta name="viewport" content="width=device-width, initial-scale=1 , user-scalable=no">
    
<!-- <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/> -->
<title>命名空间和作用域-python3教程</title>


    

	<link rel="stylesheet" href="/lib/css/bootstrap.min.css">
    <link rel="stylesheet" href="/lib/css/bootstrap-maizi.css">
    <link rel="stylesheet" href="/lib/css/animate.css">
    <!-- <script  src="https://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script> -->
    <script src="/lib/js/jquery.min.js"></script>
    <script src="/lib/js/bootstrap.min.js"></script>
    
    <script src="/lib/js/jquery.singlePageNav.min.js"></script>
    <script src="/lib/js/jquery.cookie.js"></script>
    
	
<script src="/js/article.js"></script>
<!--百度统计-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a684a10bc59d54f03381c502765556bb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<script type="text/javascript">
    // var siteHome = './';
    var staticHTMLUri = '/';
</script>


</head>
<body>
	
		  
		   <div style="height:50px;margin-bottom: 0px;"><nav class="navbar navbar-default navbar-fixed-top" id="topNav">		   <div class="container"> 
		    <!--导航--> 
		    <!--小屏幕导航按钮和logo--> 
		    <div class="navbar-header"> 
		     <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
		     <a href="http://qtxjc.com" class="navbar-brand" style="color: #1196EE;"><span>趣通小教程</span>&nbsp;<span>qtxjc.com</span></a> 
		    </div> 
		    <!--小屏幕导航按钮和logo--> 
		    <div class="navbar-collapse collapse"> 
		     <div class="profile navbar-right"> 
			      <!-- 	<ul class="nav navbar-nav"> 
			       		<li><a href="#home" data-toggle="modal" id="collector">收藏夹</a></li>
			       		<li><a href="#home" data-toggle="modal" id="homePageloginBtn">登录</a></li> 
			      		<li><a href="#home" data-toggle="modal" id="loginStatus"></a></li> 
			      	</ul>  -->
		      		
		     </div> 
		     <ul class="nav navbar-nav navbar-center"> 
		      <li> 
		       <!--搜索框--> 
		       <div class="input-group hidden" id="searchBox" style="max-width:300px;height:30px;margin-top:10px;"> 
		        <input type="text" class="form-control input-md" placeholder="输入关键词" onkeydown="onKeyDown(event)" /> 
		        <span class="input-group-addon btn btn-primary">搜索</span> 
		       </div> 
		       <!--搜索框--></li> 
	
		     </ul> 
		    </div> 
		   </div> </nav></div>
		  
	
	
<style type="text/css">
    .panel-heading{
        padding-top: 5px;
        padding-right: 5px;
    }
    .panel-body {
        padding: 10px;
    }
    .panel-body div {
        padding-left: 20px;
    }

    .menu-container{
        border-width: 2px;
        border-radius: 5px;
        border-color: green;
        border:5px solid #f6f4f0;
    
    }
    .menu-container div{
        padding-right: 10px;
        padding-left: 10px;
        line-height: 30px;
    }
    .chapter{
        background-color: #e2e2e2;
        font-weight: bold;
    }
    .course{
        background-color: #e2e2e2;
        text-indent: 1em;
    }
    .normal{
        color: black;
    }
    .selected{
        background-color: #1196EE;
        color: white;
    }
    .block{
        /*border: thick solid #e1e1e1;*/
        
    }
    .preview{
        display: none;
    }
    .item{
        border-bottom-style:solid;
        border-width: 1px;
        border-color: #f1f1f1;
        cursor:pointer;
    }
    a:hover{
        text-decoration: none;
    }
    body{
        background-color: #dfdfdf;
    }
    td {
        border: 1px solid #ddd
    }
</style>
<div class="container">
<!-- <div class="row">
    <div class="col-sm-12" style="background-color: white;border-radius:8px;border-style: solid;border-color:#dfdfdf ">
        
    </div>
</div> -->
<div class="row">
    <div class="col-sm-12 text-center" style="padding-top: 20px;">
        <strong>命名空间和作用域-python3教程</strong>
    </div>
</div>
<div class="row" style="margin-top:5px;">
    <div class="col-sm-2" style="overflow-y: auto;max-height:100%;overflow-x: hidden;">
                <div class="menu-container">
                    <div id="2c6Ba358" class="item chapter normal">python3简介</div><div id="bA0332c7" class="item course normal">Windows下安装</div><div id="C12838cA" class="item course normal">Linux下安装</div><div id="8b320BA6" class="item course normal">Mac下安装</div><div id="8a70482B" class="item chapter normal">基本语法</div><div id="0A658BA6" class="item course normal">数据类型</div><div id="9303CBc7" class="item course normal">Number</div><div id="c9349ABa" class="item course normal">字符串</div><div id="3AC2c6BA" class="item course normal">正则匹配</div><div id="a2469092" class="item course normal">列表 list</div><div id="0117b3c7" class="item course normal">元组</div><div id="aBC84A59" class="item course normal">字典</div><div id="4b8ccBC2" class="item course normal">集合</div><div id="507B4c4C" class="item chapter normal">运算符</div><div id="982A21c1" class="item course normal">算术运算符</div><div id="8484b5B0" class="item course normal">关系运算符</div><div id="c476Cc31" class="item course normal">赋值运算符</div><div id="0Ab81b19" class="item course normal">位运算符</div><div id="C6AabA97" class="item course normal">成员运算符</div><div id="0768cA9a" class="item course normal">逻辑运算符</div><div id="A4218806" class="item course normal">身份运算符</div><div id="B14746ba" class="item chapter normal">流程控制</div><div id="8b1b5118" class="item course normal">条件控制</div><div id="B8C881B2" class="item course normal">循环语句</div><div id="304c96C5" class="item course normal">迭代器与生成器</div><div id="7728974A" class="item course normal">函数</div><div id="94a9b784" class="item course normal">模块</div><div id="925AbB6C" class="item course normal">输入输出</div><div id="8aBaC7b4" class="item course normal">文件操作</div><div id="469915Aa" class="item course normal">错误和异常</div><div id="2a78B0c1" class="item chapter normal">面向对象</div><div id="4a2c2bBA" class="item chapter normal">命名空间和作用域</div><div id="12CCc4A0" class="item chapter normal">标准库概览</div><div id="2142868c" class="item chapter normal">Python操作数据库</div><div id="50300125" class="item course normal">操作redis</div><div id="AcA970B3" class="item course normal">操作mysql</div><div id="1a7CC121" class="item course normal">操作Elastic Search</div><div id="9AaCbb30" class="item course normal selected">操作mongodb</div>
                </div>
                <div style="float:left;margin-top: 30px;width: 1px;height: 100%;background: darkgray;"></div>
        </div>
    <div class="col-sm-8" style="overflow-y: auto;height: 100%;background-color: white;padding-top:20px;">
         <div class="row ontent">
             <div class="col-sm-12">
                 <h1 style="border: 0px; margin: 0px 0px 10px; padding: 0px; font-size: 2.1em; color: rgb(0, 0, 0); text-indent: initial;">命名空间和作用域</h1><h2 style="border: 0px; margin: 2px 0px; padding: 0px; font-size: 1.8em; line-height: 1.8em;">命名空间</h2><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">先看看官方文档的一段话：</p><blockquote style="border: 0px; margin: 10px; padding: 10px; background-color: rgb(243, 247, 240); font-size: 13px; line-height: 2em;"><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 4px; line-height: 1.5em; overflow-wrap: break-word; word-break: break-all; font-size: 14px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; font-style: italic;">A namespace is a mapping from names to objects.Most namespaces are currently implemented as Python dictionaries。</p></blockquote><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">命名空间(Namespace)是从名称到对象的映射，大部分的命名空间都是通过 Python 字典来实现的。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">命名空间提供了在项目中避免名字冲突的一种方法。各个命名空间是独立的，没有任何关系的，所以一个命名空间中不能有重名，但不同的命名空间是可以重名而没有任何影响。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">我们举一个计算机系统中的例子，一个文件夹(目录)中可以包含多个文件夹，每个文件夹中不能有相同的文件名，但不同文件夹中的文件可以重名。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;"><img src="/upload/image/20191119/200931162817.png" style="border: 0px; margin: 0px; padding: 0px; max-width: 100%; height: auto;"/></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">一般有三种命名空间：</p><ul style="list-style-type: none;" class=" list-paddingleft-2"><li><p><strong style="border: 0px; margin: 0px; padding: 0px;">内置名称（built-in names</strong>）， Python 语言内置的名称，比如函数名 abs、char 和异常名称 BaseException、Exception 等等。</p></li><li><p><strong style="border: 0px; margin: 0px; padding: 0px;">全局名称（global names）</strong>，模块中定义的名称，记录了模块的变量，包括函数、类、其它导入的模块、模块级的变量和常量。</p></li><li><p><strong style="border: 0px; margin: 0px; padding: 0px;">局部名称（local names）</strong>，函数中定义的名称，记录了函数的变量，包括函数的参数和局部定义的变量。（类中定义的也是）</p></li></ul><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;"><img width="50%" src="/upload/image/20191119/200932619240.png" style="border: 0px; margin: 0px; padding: 0px; max-width: 100%; height: auto;"/></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">命名空间查找顺序:</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">假设我们要使用变量 runoob，则 Python 的查找顺序为：<strong style="border: 0px; margin: 0px; padding: 0px;">局部的命名空间去 -&gt; 全局命名空间 -&gt; 内置命名空间</strong>。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">如果找不到变量 runoob，它将放弃查找并引发一个 NameError 异常:</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">NameError:&nbsp;name&nbsp;&#39;runoob&#39;&nbsp;is&nbsp;not&nbsp;defined。</pre><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">命名空间的生命周期：</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">命名空间的生命周期取决于对象的作用域，如果对象执行完成，则该命名空间的生命周期就结束。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">因此，我们无法从外部命名空间访问内部命名空间的对象。</p><h2 class="example" style="border: 0px; margin: 0px 0px 2px; padding: 0px; font-size: 14.4px; line-height: 1.8em; color: rgb(97, 127, 16); background-color: transparent;">实例</h2><p><span style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);"># var1 是全局名称</span><br/>var1&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: gray;">=</span>&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: maroon;">5</span><br/><span style="border: 0px; margin: 0px; padding: 0px; color: green; font-weight: bold;">def</span>&nbsp;some_func<span style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span>:<br/>&nbsp;<br/>&nbsp; &nbsp;&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);"># var2 是局部名称</span><br/>&nbsp; &nbsp; var2&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: gray;">=</span>&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: maroon;">6</span><br/>&nbsp; &nbsp;&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: green; font-weight: bold;">def</span>&nbsp;some_inner_func<span style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span>:<br/>&nbsp;<br/>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);"># var3 是内嵌的局部名称</span><br/>&nbsp; &nbsp; &nbsp; &nbsp; var3&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: gray;">=</span>&nbsp;<span style="border: 0px; margin: 0px; padding: 0px; color: maroon;">7</span><br/></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">如下图所示，相同的对象名称可以存在于多个命名空间中。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;"><img width="50%" src="/upload/image/20191119/200932407552.png" style="border: 0px; margin: 0px; padding: 0px; max-width: 100%; height: auto;"/></p><hr style="background-color: rgb(212, 212, 212); color: rgb(212, 212, 212); height: 1px; border: 0px; clear: both;"/><h2 style="border: 0px; margin: 2px 0px; padding: 0px; font-size: 1.8em; line-height: 1.8em;">作用域</h2><blockquote style="border: 0px; margin: 10px; padding: 10px; background-color: rgb(243, 247, 240); font-size: 13px; line-height: 2em;"><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 4px; line-height: 1.5em; overflow-wrap: break-word; word-break: break-all; font-size: 14px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; font-style: italic;">A scope is a textual region of a Python program where a namespace is directly accessible. &quot;Directly accessible&quot; here means that an unqualified reference to a name attempts to find the name in the namespace.</p></blockquote><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">作用域就是一个 Python 程序可以直接访问命名空间的正文区域。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">在一个 python 程序中，直接访问一个变量，会从内到外依次访问所有的作用域直到找到，否则会报未定义的错误。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">Python 中，程序的变量并不是在哪个位置都可以访问的，访问权限决定于这个变量是在哪里赋值的。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">变量的作用域决定了在哪一部分程序可以访问哪个特定的变量名称。Python的作用域一共有4种，分别是：</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">有四种作用域：</p><ul style="list-style-type: none;" class=" list-paddingleft-2"><li><p><strong style="border: 0px; margin: 0px; padding: 0px;">L（Local）</strong>：最内层，包含局部变量，比如一个函数/方法内部。</p></li><li><p><strong style="border: 0px; margin: 0px; padding: 0px;">E（Enclosing）</strong>：包含了非局部(non-local)也非全局(non-global)的变量。比如两个嵌套函数，一个函数（或类） A 里面又包含了一个函数 B ，那么对于 B 中的名称来说 A 中的作用域就为 nonlocal。</p></li><li><p><strong style="border: 0px; margin: 0px; padding: 0px;">G（Global）</strong>：当前脚本的最外层，比如当前模块的全局变量。</p></li><li><p><strong style="border: 0px; margin: 0px; padding: 0px;">B（Built-in）</strong>： 包含了内建的变量/关键字等。，最后被搜索</p></li></ul><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">规则顺序：&nbsp;<strong style="border: 0px; margin: 0px; padding: 0px;">L –&gt; E –&gt; G –&gt;gt; B</strong>。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内置中找。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;"><img src="/upload/image/20191119/200932723811.png" style="border: 0px; margin: 0px; padding: 0px; max-width: 100%; height: auto;"/></p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">g_count&nbsp;=&nbsp;0&nbsp;&nbsp;#&nbsp;全局作用域def&nbsp;outer():
&nbsp;&nbsp;&nbsp;&nbsp;o_count&nbsp;=&nbsp;1&nbsp;&nbsp;#&nbsp;闭包函数外的函数中
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;inner():
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i_count&nbsp;=&nbsp;2&nbsp;&nbsp;#&nbsp;局部作用域</pre><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">内置作用域是通过一个名为 builtin 的标准模块来实现的，但是这个变量名自身并没有放入内置作用域内，所以必须导入这个文件才能够使用它。在Python3.0中，可以使用以下的代码来查看到底预定义了哪些变量:</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">&gt;&gt;&gt;&nbsp;import&nbsp;builtins&gt;&gt;&gt;&nbsp;dir(builtins)</pre><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">Python 中只有模块（module），类（class）以及函数（def、lambda）才会引入新的作用域，其它的代码块（如 if/elif/else/、try/except、for/while等）是不会引入新的作用域的，也就是说这些语句内定义的变量，外部也可以访问，如下代码：</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">&gt;&gt;&gt;&nbsp;if&nbsp;True:...&nbsp;&nbsp;msg&nbsp;=&nbsp;&#39;I&nbsp;am&nbsp;from&nbsp;Runoob&#39;...&nbsp;&gt;&gt;&gt;&nbsp;msg&#39;I&nbsp;am&nbsp;from&nbsp;Runoob&#39;&gt;&gt;&gt;</pre><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">实例中 msg 变量定义在 if 语句块中，但外部还是可以访问的。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">如果将 msg 定义在函数中，则它就是局部变量，外部不能访问：</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">&gt;&gt;&gt;&nbsp;def&nbsp;test():...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg_inner&nbsp;=&nbsp;&#39;I&nbsp;am&nbsp;from&nbsp;Runoob&#39;...&nbsp;&gt;&gt;&gt;&nbsp;msg_innerTraceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):
&nbsp;&nbsp;File&nbsp;&quot;&lt;stdin&gt;&quot;,&nbsp;line&nbsp;1,&nbsp;in&nbsp;&lt;module&gt;NameError:&nbsp;name&nbsp;&#39;msg_inner&#39;&nbsp;is&nbsp;not&nbsp;defined&gt;&gt;&gt;</pre><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">从报错的信息上看，说明了 msg_inner 未定义，无法使用，因为它是局部变量，只有在函数内可以使用。</p><h3 style="border: 0px; margin: 8px 0px; padding: 0px; font-size: 1.4em;">全局变量和局部变量</h3><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">定义在函数内部的变量拥有一个局部作用域，定义在函数外的拥有全局作用域。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">局部变量只能在其被声明的函数内部访问，而全局变量可以在整个程序范围内访问。调用函数时，所有在函数内声明的变量名称都将被加入到作用域中。如下实例：</p><h2 class="example" style="border: 0px; margin: 0px 0px 2px; padding: 0px; font-size: 14.4px; line-height: 1.8em; color: rgb(97, 127, 16); background-color: transparent;">实例(Python 3.0+)</h2><p><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);">#!/usr/bin/python3</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">total</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">0</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);"># 这是一个全局变量</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);"># 可写函数说明</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-reserved" style="border: 0px; margin: 0px; padding: 0px; color: green;">def</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-builtin" style="border: 0px; margin: 0px; padding: 0px; color: teal;">sum</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">arg1</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">, </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">arg2</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">: &nbsp; &nbsp;</span><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);">#返回2个参数的和.&quot;</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">total</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">arg1</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> + </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">arg2</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);"># total在这里是局部变量.</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-quotes" style="border: 0px; margin: 0px; padding: 0px; color: rgb(139, 0, 0);">&quot;</span><span class="hl-string" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 17, 17);">函数内是局部变量 : </span><span class="hl-quotes" style="border: 0px; margin: 0px; padding: 0px; color: rgb(139, 0, 0);">&quot;</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">, </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">total</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-reserved" style="border: 0px; margin: 0px; padding: 0px; color: green;">return</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">total</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 </span><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);">#调用sum函数</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-builtin" style="border: 0px; margin: 0px; padding: 0px; color: teal;">sum</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">10</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">, </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">20</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-quotes" style="border: 0px; margin: 0px; padding: 0px; color: rgb(139, 0, 0);">&quot;</span><span class="hl-string" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 17, 17);">函数外是全局变量 : </span><span class="hl-quotes" style="border: 0px; margin: 0px; padding: 0px; color: rgb(139, 0, 0);">&quot;</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">, </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">total</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">以上实例输出结果：</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">函数内是局部变量&nbsp;:&nbsp;&nbsp;30函数外是全局变量&nbsp;:&nbsp;&nbsp;0</pre><h3 style="border: 0px; margin: 8px 0px; padding: 0px; font-size: 1.4em;">global 和 nonlocal关键字</h3><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">当内部作用域想修改外部作用域的变量时，就要用到global和nonlocal关键字了。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">以下实例修改全局变量 num：</p><h2 class="example" style="border: 0px; margin: 0px 0px 2px; padding: 0px; font-size: 14.4px; line-height: 1.8em; color: rgb(97, 127, 16); background-color: transparent;">实例(Python 3.0+)</h2><p><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);">#!/usr/bin/python3</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">1</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-reserved" style="border: 0px; margin: 0px; padding: 0px; color: green;">def</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">fun1</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">: &nbsp; &nbsp;</span><span class="hl-reserved" style="border: 0px; margin: 0px; padding: 0px; color: green;">global</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> &nbsp;</span><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);"># 需要使用 global 关键字声明</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> 
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">123</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">fun1</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">以上实例输出结果：</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">1123123</pre><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">如果要修改嵌套作用域（enclosing 作用域，外层非全局作用域）中的变量则需要 nonlocal 关键字了，如下实例：</p><h2 class="example" style="border: 0px; margin: 0px 0px 2px; padding: 0px; font-size: 14.4px; line-height: 1.8em; color: rgb(97, 127, 16); background-color: transparent;">实例(Python 3.0+)</h2><p><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);">#!/usr/bin/python3</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 </span><span class="hl-reserved" style="border: 0px; margin: 0px; padding: 0px; color: green;">def</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">outer</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">: &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">10</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-reserved" style="border: 0px; margin: 0px; padding: 0px; color: green;">def</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">inner</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">: &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">nonlocal</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> &nbsp; </span><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);"># nonlocal关键字声明</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">100</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">inner</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">num</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">outer</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">以上实例输出结果：</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">100100</pre><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">另外有一种特殊情况，假设下面这段代码被运行：</p><h2 class="example" style="border: 0px; margin: 0px 0px 2px; padding: 0px; font-size: 14.4px; line-height: 1.8em; color: rgb(97, 127, 16); background-color: transparent;">实例(Python 3.0+)</h2><p><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);">#!/usr/bin/python3</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">10</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-reserved" style="border: 0px; margin: 0px; padding: 0px; color: green;">def</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">test</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">: &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> + </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">1</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">test</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">以上程序执行，报错信息如下：</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251);">Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):
&nbsp;&nbsp;File&nbsp;&quot;test.py&quot;,&nbsp;line&nbsp;7,&nbsp;in&nbsp;&lt;module&gt;
&nbsp;&nbsp;&nbsp;&nbsp;test()
&nbsp;&nbsp;File&nbsp;&quot;test.py&quot;,&nbsp;line&nbsp;5,&nbsp;in&nbsp;test
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;=&nbsp;a&nbsp;+&nbsp;1UnboundLocalError:&nbsp;local&nbsp;variable&nbsp;&#39;a&#39;&nbsp;referenced&nbsp;before&nbsp;assignment</pre><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">错误信息为局部作用域引用错误，因为 test 函数中的 a 使用的是局部，未定义，无法修改。</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">修改 a 为全局变量，通过函数参数传递，可以正常执行输出结果为：</p><h2 class="example" style="border: 0px; margin: 0px 0px 2px; padding: 0px; font-size: 14.4px; line-height: 1.8em; color: rgb(97, 127, 16); background-color: transparent;">实例(Python 3.0+)</h2><p><span class="hl-comment" style="border: 0px; margin: 0px; padding: 0px; color: rgb(170, 85, 0);">#!/usr/bin/python3</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">10</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-reserved" style="border: 0px; margin: 0px; padding: 0px; color: green;">def</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">test</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">: &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> = </span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"> + </span><span class="hl-number" style="border: 0px; margin: 0px; padding: 0px; color: maroon;">1</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;">
 &nbsp; &nbsp;</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">print</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span><span class="hl-code" style="border: 0px; margin: 0px; padding: 0px; color: gray;"></span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">test</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">(</span><span class="hl-identifier" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 85, 170);">a</span><span class="hl-brackets" style="border: 0px; margin: 0px; padding: 0px; color: olive;">)</span></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px;">执行输出结果为：</p><p>11</p><p><a href="https://www.runoob.com/python3/python3-class.html" style="border: 0px; margin: 0px; padding: 0px; color: grey; text-decoration-line: none; transition-duration: 0.2s; transition-property: opacity;"><span class="fa fa-arrow-left" aria-hidden="true" style="display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 16px; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased;"></span></a>&nbsp;<a href="https://www.runoob.com/python3/python3-class.html" rel="prev" title="Python3 面向对象" style="border: 0px; margin: 0px; padding: 0px; color: grey; text-decoration-line: none; transition-duration: 0.2s; transition-property: opacity;">Python3 面向对象</a></p><p><a href="https://www.runoob.com/python3/python3-stdlib.html" rel="next" title="Python3 标准库概览" style="border: 0px; margin: 0px; padding: 0px; color: grey; text-decoration-line: none; transition-duration: 0.2s; transition-property: opacity;">Python3 标准库概览</a>&nbsp;<a href="https://www.runoob.com/python3/python3-stdlib.html" style="border: 0px; margin: 0px; padding: 0px; color: grey; text-decoration-line: none; transition-duration: 0.2s; transition-property: opacity;"><span class="fa fa-arrow-right" aria-hidden="true" style="display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 16px; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased;"></span></a></p><h2 class="" style="border: 0px; margin: 0px 0px 10px; padding: 0px; font-size: 20px; top: 0px; width: 854.797px; left: 0px; background-color: rgb(246, 245, 244); border-radius: 4px 4px 0px 0px; z-index: 3; color: rgb(34, 34, 34); line-height: 18px; box-shadow: rgba(0, 0, 0, 0.16) 0px 2px 4px 0px, rgba(0, 0, 0, 0.12) 0px 2px 10px 0px !important;"><p><span class="fa fa-pencil-square-o" aria-hidden="true" style="display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; font-size: 28px; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased; margin-top: 8px;"></span></p><span class="mw-headline" id="qa_headline" style="border: 0px; margin: 0px; padding: 0px; line-height: 62px;">1 篇笔记</span><span class="mw-headline" id="user_add_note" style="border: 0px; margin: 0px; padding: 0px 14px 0px 0px; float: right; line-height: 62px;"><span class="fa fa-pencil-square-o" aria-hidden="true" style="display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased;"></span>&nbsp;写笔记</span></h2><ol class="commentlist list-paddingleft-2" style="list-style-type: none;"><li><p><span class="fa fa-user-circle" aria-hidden="true" style="display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 36px; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased;"></span></p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5em;"><span class="fa fa-user" aria-hidden="true" style="display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased;"></span>&nbsp;&nbsp;&nbsp;alibi</p><p style="border: 0px; margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 1.5em;"><span class="fa fa-envelope" aria-hidden="true" style="display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased;"></span>&nbsp;&nbsp;ali***jia@qq.com</p><p><a class="upvote" style="border: 0px; margin: 0px auto 2px; padding: 0px; color: transparent; transition-duration: 0.2s; transition-property: opacity; cursor: pointer; background-image: url(&quot;upvotejs.svg?v=1&quot;); background-repeat: no-repeat; overflow: hidden; display: block; width: 40px; height: 30px; background-position: 0px -170px;"></a><span class="count" style="border: 0px; margin: 8px 0px; padding: 0px; display: block; font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; color: rgb(106, 115, 124);">12</span></p><p style="border: 0px; margin-top: 4px; margin-bottom: 4px; padding: 0px; line-height: 1.5em;">作为一个从 Java 过来的人来说，Python 的作用域有点奇葩，作为开发者，只需要关注全局作用域和局部作用域就好了，全局作用域就是说白了模块(单个 .py 文件中)直接声明的变量。</p><p style="border: 0px; margin-top: 4px; margin-bottom: 4px; padding: 0px; line-height: 1.5em;">比如有个 demo.py 的文件，含有以下代码：</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin-top: 3px; margin-bottom: 5px; padding: 7px 10px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251); border-radius: 1px;">var_global=&#39;global_var&#39;#这个var_global就是全局作用域def&nbsp;globalFunc():
&nbsp;&nbsp;var_local=&#39;local_var&#39;&nbsp;#这个就是局部变量class&nbsp;demo():
&nbsp;&nbsp;class_demo_local_var=&#39;class&nbsp;member&#39;&nbsp;#这里也是局部变量
&nbsp;&nbsp;def&nbsp;localFunc(self):
&nbsp;&nbsp;&nbsp;&nbsp;var_locals=&#39;local_func_var&#39;#这里也是局部变量</pre><p style="border: 0px; margin-top: 4px; margin-bottom: 4px; padding: 0px; line-height: 1.5em;">以上只是说明了全局变量仅仅是在 .py 文件中直接声明的变量叫全局变量，还有在 .py 文件中直接写的逻辑代码块中，也是全局变量。也就是说在 if/elif/else/、try/except、for/while 等逻辑代码块中的变量。</p><p style="border: 0px; margin-top: 4px; margin-bottom: 4px; padding: 0px; line-height: 1.5em;">这个教程中在介绍三种命令空间的时候，说查找变量的顺序为局部的命名空间去 -&gt; 全局命名空间 -&gt; 内置命名空间，但是我理解的变量查找顺序为：当前域 -&gt; 外部域(如果有) -&gt; 全局域 -&gt; 内置域。</p><p style="border: 0px; margin-top: 4px; margin-bottom: 4px; padding: 0px; line-height: 1.5em;">光说没有什么概念，我们来一段代码就清楚了。</p><p style="border: 0px; margin-top: 4px; margin-bottom: 4px; padding: 0px; line-height: 1.5em;">我们以 demo1.py 为例子:</p><pre class="prettyprint prettyprinted" style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); border-image: initial; margin-top: 3px; margin-bottom: 5px; padding: 7px 10px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 20px; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; white-space: pre-wrap; word-break: break-all; overflow-wrap: break-word; background-image: url(&quot;/images/codecolorer_bg.gif&quot;); background-position: center top; background-color: rgb(251, 251, 251); border-radius: 1px;">global_var=&#39;this&nbsp;&nbsp;var&nbsp;&nbsp;on&nbsp;&nbsp;global&nbsp;space&#39;&nbsp;&#39;&#39;&#39;
申明global_var这个位置就是全局域，也就是教程中所说的全局作用域，
同时它也是直接声明在文件中的，而不是声明在函数中或者类中的变量
&#39;&#39;&#39;class&nbsp;demo():
&nbsp;&nbsp;class_demo_local_var=&#39;class&nbsp;member&#39;&nbsp;
&nbsp;&nbsp;&#39;&#39;&#39;
&nbsp;&nbsp;虽然class_demo_local_var在这里是局部变量，这个局部变量的域相对于var_locals是外部域，
&nbsp;&nbsp;所以可以直接被var_locals所在的更小的局部域访问
&nbsp;&nbsp;&#39;&#39;&#39;
&nbsp;&nbsp;def&nbsp;localFunc(self):
&nbsp;&nbsp;&nbsp;&nbsp;var_locals=&#39;local_func_var&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&#39;&#39;&#39;
&nbsp;&nbsp;&nbsp;&nbsp;这里也是局部变量，但是相对于class_demo_local_var变量，却是更小的域，
&nbsp;&nbsp;&nbsp;&nbsp;因此class_demo_local_var所在的哪个域无法访问到当前域来
&nbsp;&nbsp;&nbsp;&nbsp;&#39;&#39;&#39;
&nbsp;&nbsp;&nbsp;&nbsp;print(self.class_demo_local_var)#到这里会查找当前域中有没有class_demo_local_var这个变量，然后再到相对于当前域的外部域去查找变量</pre></li></ol><p><br/></p>
             </div>
         </div>
        <div class="row" style="background-color: #eeeeee;">
            
             <div class="col-sm-4 text-left left-arror">
                 
             </div>
       
             <div class="col-sm-4 col-sm-offset-4 text-right right-arror">
                
             </div>
        
         </div>

    </div>
</div>
<div class="row">
    <div class="col-sm-12 text-center" style="padding-top: 10px;">
        <a href="https://www.onlinegdb.com/" target="_blank"><strong><font color="black">在线调试工具</font></strong></a>
    </div>
</div>
</div>
<script type="text/javascript">
// var siteHome = './';
var tutorial_id = '395ac943';
var article_id = '4a2c2bBA';
</script>

	
		<div style="text-align: center; height: 60px;padding-top: 20px;">鄂ICP备17006386号-5</div>
	
</body>