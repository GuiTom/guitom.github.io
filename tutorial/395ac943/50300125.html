<!-- <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd"> -->

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
 	<meta name="description" content="抖音数据分析服务">
 	<meta name="keywords" content="抖音排行榜,抖音数据,抖音营销-抖商助手 ">
    <meta name="viewport" content="width=device-width, initial-scale=1 , user-scalable=no">
    
<!-- <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/> -->
<title>操作redis-python3教程</title>


    

	<link rel="stylesheet" href="/lib/css/bootstrap.min.css">
    <link rel="stylesheet" href="/lib/css/bootstrap-maizi.css">
    <link rel="stylesheet" href="/lib/css/animate.css">
    <!-- <script  src="https://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script> -->
    <script src="/lib/js/jquery.min.js"></script>
    <script src="/lib/js/bootstrap.min.js"></script>
    
    <script src="/lib/js/jquery.singlePageNav.min.js"></script>
    <script src="/lib/js/jquery.cookie.js"></script>
    
	
<script src="/js/article.js"></script>
<!--百度统计-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a684a10bc59d54f03381c502765556bb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<script type="text/javascript">
    // var siteHome = './';
    var staticHTMLUri = '/';
</script>


</head>
<body>
	
		  
		   <div style="height:50px;margin-bottom: 0px;"><nav class="navbar navbar-default navbar-fixed-top" id="topNav">		   <div class="container"> 
		    <!--导航--> 
		    <!--小屏幕导航按钮和logo--> 
		    <div class="navbar-header"> 
		     <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
		     <a href="http://qtxjc.com" class="navbar-brand" style="color: #1196EE;"><span>趣通小教程</span>&nbsp;<span>qtxjc.com</span></a> 
		    </div> 
		    <!--小屏幕导航按钮和logo--> 
		    <div class="navbar-collapse collapse"> 
		     <div class="profile navbar-right"> 
			      <!-- 	<ul class="nav navbar-nav"> 
			       		<li><a href="#home" data-toggle="modal" id="collector">收藏夹</a></li>
			       		<li><a href="#home" data-toggle="modal" id="homePageloginBtn">登录</a></li> 
			      		<li><a href="#home" data-toggle="modal" id="loginStatus"></a></li> 
			      	</ul>  -->
		      		
		     </div> 
		     <ul class="nav navbar-nav navbar-center"> 
		      <li> 
		       <!--搜索框--> 
		       <div class="input-group hidden" id="searchBox" style="max-width:300px;height:30px;margin-top:10px;"> 
		        <input type="text" class="form-control input-md" placeholder="输入关键词" onkeydown="onKeyDown(event)" /> 
		        <span class="input-group-addon btn btn-primary">搜索</span> 
		       </div> 
		       <!--搜索框--></li> 
	
		     </ul> 
		    </div> 
		   </div> </nav></div>
		  
	
	
<style type="text/css">
    .panel-heading{
        padding-top: 5px;
        padding-right: 5px;
    }
    .panel-body {
        padding: 10px;
    }
    .panel-body div {
        padding-left: 20px;
    }

    .menu-container{
        border-width: 2px;
        border-radius: 5px;
        border-color: green;
        border:5px solid #f6f4f0;
    
    }
    .menu-container div{
        padding-right: 10px;
        padding-left: 10px;
        line-height: 30px;
    }
    .chapter{
        background-color: #e2e2e2;
        font-weight: bold;
    }
    .course{
        background-color: #e2e2e2;
        text-indent: 1em;
    }
    .normal{
        color: black;
    }
    .selected{
        background-color: #1196EE;
        color: white;
    }
    .block{
        /*border: thick solid #e1e1e1;*/
        
    }
    .preview{
        display: none;
    }
    .item{
        border-bottom-style:solid;
        border-width: 1px;
        border-color: #f1f1f1;
        cursor:pointer;
    }
    a:hover{
        text-decoration: none;
    }
    body{
        background-color: #dfdfdf;
    }
    td {
        border: 1px solid #ddd
    }
</style>
<div class="container">
<!-- <div class="row">
    <div class="col-sm-12" style="background-color: white;border-radius:8px;border-style: solid;border-color:#dfdfdf ">
        
    </div>
</div> -->
<div class="row">
    <div class="col-sm-12 text-center" style="padding-top: 20px;">
        <strong>操作redis-python3教程</strong>
    </div>
</div>
<div class="row" style="margin-top:5px;">
    <div class="col-sm-2" style="overflow-y: auto;max-height:100%;overflow-x: hidden;">
                <div class="menu-container">
                    <div id="2c6Ba358" class="item chapter normal">python3简介</div><div id="bA0332c7" class="item course normal">Windows下安装</div><div id="C12838cA" class="item course normal">Linux下安装</div><div id="8b320BA6" class="item course normal">Mac下安装</div><div id="8a70482B" class="item chapter normal">基本语法</div><div id="0A658BA6" class="item course normal">数据类型</div><div id="9303CBc7" class="item course normal">Number</div><div id="c9349ABa" class="item course normal">字符串</div><div id="3AC2c6BA" class="item course normal">正则匹配</div><div id="a2469092" class="item course normal">列表 list</div><div id="0117b3c7" class="item course normal">元组</div><div id="aBC84A59" class="item course normal">字典</div><div id="4b8ccBC2" class="item course normal">集合</div><div id="507B4c4C" class="item chapter normal">运算符</div><div id="982A21c1" class="item course normal">算术运算符</div><div id="8484b5B0" class="item course normal">关系运算符</div><div id="c476Cc31" class="item course normal">赋值运算符</div><div id="0Ab81b19" class="item course normal">位运算符</div><div id="C6AabA97" class="item course normal">成员运算符</div><div id="0768cA9a" class="item course normal">逻辑运算符</div><div id="A4218806" class="item course normal">身份运算符</div><div id="B14746ba" class="item chapter normal">流程控制</div><div id="8b1b5118" class="item course normal">条件控制</div><div id="B8C881B2" class="item course normal">循环语句</div><div id="304c96C5" class="item course normal">迭代器与生成器</div><div id="7728974A" class="item course normal">函数</div><div id="94a9b784" class="item course normal">模块</div><div id="925AbB6C" class="item course normal">输入输出</div><div id="8aBaC7b4" class="item course normal">文件操作</div><div id="469915Aa" class="item course normal">错误和异常</div><div id="2a78B0c1" class="item chapter normal">面向对象</div><div id="4a2c2bBA" class="item chapter normal">命名空间和作用域</div><div id="12CCc4A0" class="item chapter normal">标准库概览</div><div id="2142868c" class="item chapter normal">Python操作数据库</div><div id="50300125" class="item course normal">操作redis</div><div id="AcA970B3" class="item course normal">操作mysql</div><div id="1a7CC121" class="item course normal">操作Elastic Search</div><div id="9AaCbb30" class="item course normal selected">操作mongodb</div>
                </div>
                <div style="float:left;margin-top: 30px;width: 1px;height: 100%;background: darkgray;"></div>
        </div>
    <div class="col-sm-8" style="overflow-y: auto;height: 100%;background-color: white;padding-top:20px;">
         <div class="row ontent">
             <div class="col-sm-12">
                 <p><span style="font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; background-color: rgba(255, 255, 255, 0.5);">redis-py提供两个类Redis和StrictRedis用于实现Redis的命令，StrictRedis用于实现大部分官方的命令，并使用官方的语法和命令，Redis是StrictRedis的子类，用于向后兼容旧版本的redis-py</span></p><p>首先请确保安装有 redis 驱动包 (pip install redis)</p><p>下面的实例连接一个 redis 实例并读写一个键值对</p><pre class="brush:cpp;toolbar:false">#!/usr/bin/env&nbsp;python
#&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-
import&nbsp;redis
r&nbsp;=&nbsp;redis.Redis(host=&#39;10.211.55.4&#39;,&nbsp;port=6379)
r.set(&#39;foo&#39;,&nbsp;&#39;Bar&#39;)#设置一个键值对
print(r.get(&#39;foo&#39;))#读取键值</pre><p><span style="font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; background-color: rgba(255, 255, 255, 0.5);">redis-py使用connection pool来管理对一个redis server的所有连接，避免每次建立、释放连接的开销。默认，每个Redis实例都会维护一个自己的连接池。可以直接建立一个连接池，然后作为参数Redis，这样就可以实现多个Redis实例共享一个连接池</span></p><p><span style="font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; background-color: rgba(255, 255, 255, 0.5);">下面的例子维护一个共享连接池：</span></p><p><br/></p><pre class="brush:cpp;toolbar:false">#!/usr/bin/env&nbsp;python
#&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-
import&nbsp;redis
pool&nbsp;=&nbsp;redis.ConnectionPool(host=&#39;192.168.18.11&#39;,&nbsp;port=6379)&nbsp;
r&nbsp;=&nbsp;redis.Redis(connection_pool=pool)
r.set(&#39;foo&#39;,&nbsp;&#39;Bar&#39;)
print&nbsp;r.get(&#39;foo&#39;)</pre><p><span style="font-family:微软雅黑, PTSans, Arial, sans-serif"><span style="font-size: 15px; background-color: rgba(255, 255, 255, 0.5);">API详解:</span></span></p><p><span style="font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; background-color: rgba(255, 255, 255, 0.5);"><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">set(name, value, ex=None, px=None, nx=False, xx=False)</strong></span><br/></p><p><span style="font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; background-color: rgba(255, 255, 255, 0.5);"></span></p><p><span style="background-color: rgb(238, 236, 225);">在Redis中设置值，默认，不存在则创建，存在则修改</span></p><p><span style="background-color: rgb(238, 236, 225);">参数：</span></p><p><span style="background-color: rgb(238, 236, 225);">&nbsp; &nbsp; &nbsp;ex，过期时间（秒）</span></p><p><span style="background-color: rgb(238, 236, 225);">&nbsp; &nbsp; &nbsp;px，过期时间（毫秒）</span></p><p><span style="background-color: rgb(238, 236, 225);">&nbsp; &nbsp; &nbsp;nx，如果设置为True，则只有name不存在时，当前set操作才执行</span></p><p><span style="background-color: rgb(238, 236, 225);">&nbsp; &nbsp; &nbsp;xx，如果设置为True，则只有name存在时，岗前set操作才执行</span></p><p><span style="font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; background-color: rgba(255, 255, 255, 0.5);"><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">setnx(name, value)</strong></span><br/></p><p><span style="background-color: rgb(238, 236, 225);">设置值，只有name不存在时，执行设置操作（添加</span><br/></p><p><span style="font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; background-color: rgba(255, 255, 255, 0.5);"><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);"></strong></span><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">setex(name, value, time)</strong></p><p><span style="background-color: rgb(238, 236, 225);"># 设置值</span></p><p><span style="background-color: rgb(238, 236, 225);"># 参数:&nbsp; &nbsp; &nbsp;</span></p><p><span style="background-color: rgb(238, 236, 225);"># time，过期时间（数字秒 或 timedelta对象）</span></p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">psetex(name, time_ms, value)</strong></p><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word; font-size: 12px; font-family: &quot;Courier New&quot; !important;">批量设置值</pre><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">get(name)</strong></p><p>获取值</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);"><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">mget(keys, *args)</strong></strong></p><p>批量获取</p><pre>&nbsp;r.mget(&#39;ylr&#39;,&nbsp;&#39;zhaogongzi&#39;)&nbsp;或&nbsp;r.mget([&#39;ylr&#39;,&nbsp;&#39;zhaogongzi&#39;])</pre><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">getset(name, value)</strong></p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">获取原值并设置新值<br/></strong></p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);"><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">lpush(name,values)</strong></strong># 在name对应的list中添加元素，每个新的元素都添加到列表的最左边</p><p># 如：</p><p>&nbsp; &nbsp; # r.lpush(&#39;oo&#39;, 11,22,33)</p><p>&nbsp; &nbsp; # 保存顺序为: 33,22,11</p><p># 扩展：</p><p>&nbsp; &nbsp; # rpush(name, values) 表示从右向左操作</p><p style="margin: 10px auto; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);"><strong style="margin: 0px; padding: 0px;">lpushx(name,value)</strong></p><p># 在name对应的list中添加元素，只有name已经存在时，值添加到列表的最左边</p><p># rpushx(name, value) 表示从右向左操作</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">llen(name)</strong></p><p># name对应的list元素的个数</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">linsert(name, where, refvalue, value))</strong></p><p># 在name对应的列表的某一个值前或后插入一个新值</p><p># 参数：</p><p>&nbsp; &nbsp; # name，redis的name</p><p>&nbsp; &nbsp; # where，BEFORE或AFTER</p><p>&nbsp; &nbsp; # refvalue，标杆值，即：在它前后插入数据</p><p>&nbsp; &nbsp; # value，要插入的数据</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">r.lset(name, index, value)</strong></p><p># 对name对应的list中的某一个索引位置重新赋值</p><p># 参数：</p><p>&nbsp; &nbsp; # name，redis的name</p><p>&nbsp; &nbsp; # index，list的索引位置</p><p>&nbsp; &nbsp; # value，要设置的值</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);"><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">r.lrem(name, value, num)</strong></strong><br/></p><p># 在name对应的list中删除指定的值</p><p># 参数：</p><p>&nbsp; &nbsp; # name，redis的name</p><p>&nbsp; &nbsp; # value，要删除的值</p><p>&nbsp; &nbsp; # num，&nbsp; num=0，删除列表中所有的指定值；</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# num=2,从前到后，删除2个；</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# num=-2,从后向前，删除2个</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">lpop(name)</strong></p><p># 在name对应的列表的左侧获取第一个元素并在列表中移除，返回值则是第一个元素</p><p># rpop(name) 表示从右向左操作<br/></p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">lindex(name, index)</strong></p><p># 参数：</p><p># name，redis的name&nbsp; &nbsp;&nbsp;</p><p># start，索引的起始位置</p><p># end，索引结束位置</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">ltrim(name, start, end)</strong></p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);"></strong></p><p># 在name对应的列表中移除没有在start-end索引之间的值</p><p># 参数:</p><p># name，redis的name&nbsp; &nbsp; &nbsp;</p><p># start，索引的起始位置&nbsp; &nbsp; &nbsp;</p><p># end，索引结束位置</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);"></strong><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">rpoplpush(src, dst)</strong></p><p># 从一个列表取出最右边的元素，同时将其添加至另一个列表的最左边</p><p># 参数：&nbsp; &nbsp; &nbsp;</p><p># src，要取数据的列表的name</p><p># dst，要添加数据的列表的name</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">blpop(keys, timeout)</strong></p><p># 将多个列表排列，按照从左到右去pop对应列表的元素</p><p># 参数：</p><p>&nbsp; &nbsp; # keys，redis的name的集合</p><p>&nbsp; &nbsp; # timeout，超时时间，当元素所有列表的元素获取完之后，阻塞等待列表内有数据的时间（秒）, 0 表示永远阻塞</p><p># 更多：</p><p>&nbsp; &nbsp; # r.brpop(keys, timeout)，从右向左获取数据</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">brpoplpush(src, dst, timeout=0)</strong></p><p># 从一个列表的右侧移除一个元素并将其添加到另一个列表的左侧</p><p># 参数：</p><p>&nbsp; &nbsp; # src，取出并要移除元素的列表对应的name</p><p>&nbsp; &nbsp; # dst，要插入元素的列表对应的name</p><p>&nbsp; &nbsp; # timeout，当src对应的列表中没有数据时，阻塞等待其有数据的超时时间（秒），0 表示永远阻塞</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">sadd(name,values)</strong></p><p># name对应的集合中添加元素</p><p><strong style="margin: 0px; padding: 0px; font-family: 微软雅黑, PTSans, Arial, sans-serif; font-size: 15px; white-space: normal; background-color: rgba(255, 255, 255, 0.5);">scard(name)</strong></p><p>#获取name对应的集合中元素个数<br/></p><p><br/></p><p><a href="https://www.cnblogs.com/zhaohuhu/p/9140673.html#_label0_9" target="_blank">参考链接</a>:<a href="https://www.cnblogs.com/zhaohuhu/p/9140673.html#_label0_9">https://www.cnblogs.com/zhaohuhu/p/9140673.html#_label0_9</a></p>
             </div>
         </div>
        <div class="row" style="background-color: #eeeeee;">
            
             <div class="col-sm-4 text-left left-arror">
                 
             </div>
       
             <div class="col-sm-4 col-sm-offset-4 text-right right-arror">
                
             </div>
        
         </div>

    </div>
</div>
<div class="row">
    <div class="col-sm-12 text-center" style="padding-top: 10px;">
        <a href="https://www.onlinegdb.com/" target="_blank"><strong><font color="black">在线调试工具</font></strong></a>
    </div>
</div>
</div>
<script type="text/javascript">
// var siteHome = './';
var tutorial_id = '395ac943';
var article_id = '50300125';
</script>

	
		<div style="text-align: center; height: 60px;padding-top: 20px;">鄂ICP备17006386号-5</div>
	
</body>